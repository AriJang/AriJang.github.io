import{s as Ae,n as ue,r as Ne,o as Oe}from"../chunks/scheduler.BvLojk_z.js";import{S as Se,i as De,e as g,s as L,c as j,d as O,h as F,g as h,m as ae,n as v,p as ee,q as se,r as be,j as X,k as b,o as z,u as oe,v as ve,b as fe,f as he,l as Te}from"../chunks/index.CdL9KQoL.js";function x(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function me(l,e,t){const n=l.slice();return n[29]=e[t],n}function ke(l,e,t){const n=l.slice();return n[32]=e[t],n[34]=t,n}function ye(l,e,t){const n=l.slice();return n[35]=e[t],n[37]=t,n}function Ie(l,e,t){const n=l.slice();return n[38]=e[t],n[40]=t,n}function Ve(l,e,t){const n=l.slice();return n[38]=e[t],n[40]=t,n}function Be(l){let e;return{c(){e=g("div"),this.h()},l(t){e=j(t,"DIV",{class:!0,style:!0}),O(e).forEach(h),this.h()},h(){v(e,"class","line horizontal svelte-jejc81"),se(e,"top",l[40]*(1200/18)+"px")},m(t,n){X(t,e,n)},p:ue,d(t){t&&h(e)}}}function Ue(l){let e;return{c(){e=g("div"),this.h()},l(t){e=j(t,"DIV",{class:!0,style:!0}),O(e).forEach(h),this.h()},h(){v(e,"class","line vertical svelte-jejc81"),se(e,"left",l[40]*(1200/18)+"px")},m(t,n){X(t,e,n)},p:ue,d(t){t&&h(e)}}}function Me(l){let e;return{c(){e=g("div"),this.h()},l(t){e=j(t,"DIV",{class:!0}),O(e).forEach(h),this.h()},h(){v(e,"class","star-point svelte-jejc81")},m(t,n){X(t,e,n)},d(t){t&&h(e)}}}function Le(l){let e;return{c(){e=g("div"),this.h()},l(t){e=j(t,"DIV",{class:!0}),O(e).forEach(h),this.h()},h(){v(e,"class","stone white svelte-jejc81")},m(t,n){X(t,e,n)},d(t){t&&h(e)}}}function Fe(l){let e;return{c(){e=g("div"),this.h()},l(t){e=j(t,"DIV",{class:!0}),O(e).forEach(h),this.h()},h(){v(e,"class","stone black svelte-jejc81")},m(t,n){X(t,e,n)},d(t){t&&h(e)}}}function ge(l){let e,t,n=l[3]&&je(l);return{c(){e=g("div"),n&&n.c(),this.h()},l(o){e=j(o,"DIV",{class:!0});var c=O(e);n&&n.l(c),c.forEach(h),this.h()},h(){v(e,"class",t="stone "+l[1][l[34]+1][l[37]+1]+" svelte-jejc81")},m(o,c){X(o,e,c),n&&n.m(e,null)},p(o,c){o[3]?n?n.p(o,c):(n=je(o),n.c(),n.m(e,null)):n&&(n.d(1),n=null),c[0]&2&&t!==(t="stone "+o[1][o[34]+1][o[37]+1]+" svelte-jejc81")&&v(e,"class",t)},d(o){o&&h(e),n&&n.d()}}}function je(l){let e,t=l[2][l[34]+1][l[37]+1]+"",n;return{c(){e=g("span"),n=fe(t),this.h()},l(o){e=j(o,"SPAN",{class:!0});var c=O(e);n=he(c,t),c.forEach(h),this.h()},h(){v(e,"class","move-number svelte-jejc81")},m(o,c){X(o,e,c),b(e,n)},p(o,c){c[0]&4&&t!==(t=o[2][o[34]+1][o[37]+1]+"")&&Te(n,t)},d(o){o&&h(e)}}}function we(l){let e,t=l[5].some(P),n,o,c,i,m;function P(...y){return l[16](l[34],l[37],...y)}let E=t&&Me();function H(y,T){if(y[1][y[34]+1][y[37]+1]==="black")return Fe;if(y[1][y[34]+1][y[37]+1]==="white")return Le}let S=H(l),N=S&&S(l),d=(l[1][l[34]+1][l[37]+1]==="black"||l[1][l[34]+1][l[37]+1]==="white")&&ge(l);function $(){return l[17](l[34],l[37])}function K(...y){return l[18](l[34],l[37],...y)}return{c(){e=g("div"),E&&E.c(),n=L(),N&&N.c(),o=L(),d&&d.c(),c=L(),this.h()},l(y){e=j(y,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var T=O(e);E&&E.l(T),n=F(T),N&&N.l(T),o=F(T),d&&d.l(T),c=F(T),T.forEach(h),this.h()},h(){v(e,"class","cell svelte-jejc81"),se(e,"top",l[34]*(1200/18)-25+"px"),se(e,"left",l[37]*(1200/18)-25+"px"),v(e,"role","button"),v(e,"tabindex","0")},m(y,T){X(y,e,T),E&&E.m(e,null),b(e,n),N&&N.m(e,null),b(e,o),d&&d.m(e,null),b(e,c),i||(m=[z(e,"click",$),z(e,"keydown",K)],i=!0)},p(y,T){l=y,S!==(S=H(l))&&(N&&N.d(1),N=S&&S(l),N&&(N.c(),N.m(e,o))),l[1][l[34]+1][l[37]+1]==="black"||l[1][l[34]+1][l[37]+1]==="white"?d?d.p(l,T):(d=ge(l),d.c(),d.m(e,c)):d&&(d.d(1),d=null)},d(y){y&&h(e),E&&E.d(),N&&N.d(),d&&d.d(),i=!1,Ne(m)}}}function Ee(l){let e,t=x(l[32].slice(1,20)),n=[];for(let o=0;o<t.length;o+=1)n[o]=we(ye(l,t,o));return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=ve()},l(o){for(let c=0;c<n.length;c+=1)n[c].l(o);e=ve()},m(o,c){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(o,c);X(o,e,c)},p(o,c){if(c[0]&174){t=x(o[32].slice(1,20));let i;for(i=0;i<t.length;i+=1){const m=ye(o,t,i);n[i]?n[i].p(m,c):(n[i]=we(m),n[i].c(),n[i].m(e.parentNode,e))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}},d(o){o&&h(e),oe(n,o)}}}function Pe(l){let e;return{c(){e=fe("순서보이기")},l(t){e=he(t,"순서보이기")},m(t,n){X(t,e,n)},d(t){t&&h(e)}}}function Ke(l){let e;return{c(){e=fe("순서숨기기")},l(t){e=he(t,"순서숨기기")},m(t,n){X(t,e,n)},d(t){t&&h(e)}}}function Ce(l){let e,t=l[29]+"",n,o;return{c(){e=g("option"),n=fe(t),this.h()},l(c){e=j(c,"OPTION",{});var i=O(e);n=he(i,t),i.forEach(h),this.h()},h(){e.__value=o=l[29],be(e,e.__value)},m(c,i){X(c,e,i),b(e,n)},p(c,i){i[0]&16&&t!==(t=c[29]+"")&&Te(n,t),i[0]&16&&o!==(o=c[29])&&(e.__value=o,be(e,e.__value))},d(c){c&&h(e)}}}function Re(l){let e,t,n,o,c,i,m,P,E,H,S,N,d,$,K,y="리셋",T,M,J,ce="기보 저장",te,q,ie="기보 불러오기 (로컬)",le,W,ne,Y,G,de="기보 선택 (assets)",re,a,f=x(Array(19)),u=[];for(let s=0;s<f.length;s+=1)u[s]=Be(Ve(l,f,s));let C=x(Array(19)),_=[];for(let s=0;s<C.length;s+=1)_[s]=Ue(Ie(l,C,s));let w=x(l[1].slice(1,20)),p=[];for(let s=0;s<w.length;s+=1)p[s]=Ee(ke(l,w,s));function D(s,B){return s[3]?Ke:Pe}let R=D(l),V=R(l),Q=x(l[4]),k=[];for(let s=0;s<Q.length;s+=1)k[s]=Ce(me(l,Q,s));return{c(){e=g("div"),t=g("div");for(let s=0;s<u.length;s+=1)u[s].c();n=L();for(let s=0;s<_.length;s+=1)_[s].c();o=L();for(let s=0;s<p.length;s+=1)p[s].c();c=L(),i=g("div"),m=g("button"),P=L(),E=g("button"),H=L(),S=g("button"),N=L(),d=g("button"),V.c(),$=L(),K=g("button"),K.textContent=y,T=L(),M=g("div"),J=g("button"),J.textContent=ce,te=L(),q=g("label"),q.textContent=ie,le=L(),W=g("input"),ne=L(),Y=g("select"),G=g("option"),G.textContent=de;for(let s=0;s<k.length;s+=1)k[s].c();this.h()},l(s){e=j(s,"DIV",{class:!0});var B=O(e);t=j(B,"DIV",{class:!0});var r=O(t);for(let U=0;U<u.length;U+=1)u[U].l(r);n=F(r);for(let U=0;U<_.length;U+=1)_[U].l(r);o=F(r);for(let U=0;U<p.length;U+=1)p[U].l(r);r.forEach(h),c=F(B),i=j(B,"DIV",{class:!0});var A=O(i);m=j(A,"BUTTON",{class:!0}),O(m).forEach(h),P=F(A),E=j(A,"BUTTON",{class:!0}),O(E).forEach(h),H=F(A),S=j(A,"BUTTON",{class:!0}),O(S).forEach(h),N=F(A),d=j(A,"BUTTON",{class:!0});var pe=O(d);V.l(pe),pe.forEach(h),$=F(A),K=j(A,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),ae(K)!=="svelte-ib7ad3"&&(K.textContent=y),T=F(A),M=j(A,"DIV",{class:!0});var Z=O(M);J=j(Z,"BUTTON",{class:!0,"data-svelte-h":!0}),ae(J)!=="svelte-5dzi3v"&&(J.textContent=ce),te=F(Z),q=j(Z,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ae(q)!=="svelte-j9loce"&&(q.textContent=ie),le=F(Z),W=j(Z,"INPUT",{type:!0,id:!0,class:!0}),ne=F(Z),Y=j(Z,"SELECT",{class:!0});var _e=O(Y);G=j(_e,"OPTION",{"data-svelte-h":!0}),ae(G)!=="svelte-1tfg7ip"&&(G.textContent=de);for(let U=0;U<k.length;U+=1)k[U].l(_e);_e.forEach(h),Z.forEach(h),A.forEach(h),B.forEach(h),this.h()},h(){v(t,"class","board svelte-jejc81"),v(m,"class","button white-button svelte-jejc81"),ee(m,"selected",l[0]==="white"),v(E,"class","button black-button svelte-jejc81"),ee(E,"selected",l[0]==="black"),v(S,"class","button alternate-button svelte-jejc81"),ee(S,"selected",l[0]==="alternate"),v(d,"class","button number-button svelte-jejc81"),v(K,"class","button number-button svelte-jejc81"),se(K,"background-color","red"),v(J,"class","kibo-button save svelte-jejc81"),v(q,"for","kibo-file"),v(q,"class","kibo-button load svelte-jejc81"),v(W,"type","file"),v(W,"id","kibo-file"),v(W,"class","file-input svelte-jejc81"),G.__value="",be(G,G.__value),v(Y,"class","kibo-button load svelte-jejc81"),v(M,"class","kibo-container svelte-jejc81"),v(i,"class","controls svelte-jejc81"),v(e,"class","board-container svelte-jejc81")},m(s,B){X(s,e,B),b(e,t);for(let r=0;r<u.length;r+=1)u[r]&&u[r].m(t,null);b(t,n);for(let r=0;r<_.length;r+=1)_[r]&&_[r].m(t,null);b(t,o);for(let r=0;r<p.length;r+=1)p[r]&&p[r].m(t,null);b(e,c),b(e,i),b(i,m),b(i,P),b(i,E),b(i,H),b(i,S),b(i,N),b(i,d),V.m(d,null),b(i,$),b(i,K),b(i,T),b(i,M),b(M,J),b(M,te),b(M,q),b(M,le),b(M,W),b(M,ne),b(M,Y),b(Y,G);for(let r=0;r<k.length;r+=1)k[r]&&k[r].m(Y,null);re||(a=[z(t,"contextmenu",l[8]),z(m,"click",l[10]),z(E,"click",l[11]),z(S,"click",l[12]),z(d,"click",l[6]),z(K,"click",l[9]),z(J,"click",l[13]),z(W,"change",l[14]),z(Y,"change",l[15])],re=!0)},p(s,B){if(B[0]&174){w=x(s[1].slice(1,20));let r;for(r=0;r<w.length;r+=1){const A=ke(s,w,r);p[r]?p[r].p(A,B):(p[r]=Ee(A),p[r].c(),p[r].m(t,null))}for(;r<p.length;r+=1)p[r].d(1);p.length=w.length}if(B[0]&1&&ee(m,"selected",s[0]==="white"),B[0]&1&&ee(E,"selected",s[0]==="black"),B[0]&1&&ee(S,"selected",s[0]==="alternate"),R!==(R=D(s))&&(V.d(1),V=R(s),V&&(V.c(),V.m(d,null))),B[0]&16){Q=x(s[4]);let r;for(r=0;r<Q.length;r+=1){const A=me(s,Q,r);k[r]?k[r].p(A,B):(k[r]=Ce(A),k[r].c(),k[r].m(Y,null))}for(;r<k.length;r+=1)k[r].d(1);k.length=Q.length}},i:ue,o:ue,d(s){s&&h(e),oe(u,s),oe(_,s),oe(p,s),V.d(),oe(k,s),re=!1,Ne(a)}}}const I=21;function Xe(l,e,t){let n="alternate",o="black",c=Array(I).fill().map(()=>Array(I).fill(null)),i=0,m=Array(I).fill().map(()=>Array(I).fill(null)),P=[],E=!0,H=[];const S=[{x:4,y:4},{x:4,y:10},{x:4,y:16},{x:10,y:4},{x:10,y:10},{x:10,y:16},{x:16,y:4},{x:16,y:10},{x:16,y:16}];function N(){t(3,E=!E)}function d(a,f){if(c[a][f]===null){t(1,c[a][f]=o,c),i++,t(2,m[a][f]=i,m);const u=K(a,f);P.push({x:a,y:f,stone:o,capturedStones:u}),n==="alternate"&&(o=o==="black"?"white":"black")}else t(1,c[a][f]=null,c)}function $(a){if(a.preventDefault(),P.length>0){const f=P.pop(),{x:u,y:C,capturedStones:_}=f;t(1,c[u][C]=null,c),t(2,m[u][C]=null,m),i--;for(let{x:w,y:p,stone:D}of _)t(1,c[w][p]=D,c);o=f.stone}}function K(a,f){const u=o==="black"?"white":"black",C=[{dx:-1,dy:0},{dx:1,dy:0},{dx:0,dy:-1},{dx:0,dy:1}],_=[];for(let{dx:w,dy:p}of C){const D=a+w,R=f+p;if(D>0&&D<I&&R>0&&R<I&&c[D][R]===u){const V=y(D,R,u);T(V)&&(_.push(...V),M(V))}}return _}function y(a,f,u,C=new Set){const _=[],w=[{x:a,y:f}];C.add(`${a},${f}`);const p=[{dx:-1,dy:0},{dx:1,dy:0},{dx:0,dy:-1},{dx:0,dy:1}];for(;w.length>0;){const{x:D,y:R}=w.pop();_.push({x:D,y:R,stone:c[D][R]});for(let{dx:V,dy:Q}of p){const k=D+V,s=R+Q;k>0&&k<I&&s>0&&s<I&&c[k][s]===u&&!C.has(`${k},${s}`)&&(C.add(`${k},${s}`),w.push({x:k,y:s}))}}return _}function T(a){const f=[{dx:-1,dy:0},{dx:1,dy:0},{dx:0,dy:-1},{dx:0,dy:1}];for(let{x:u,y:C}of a)for(let{dx:_,dy:w}of f){const p=u+_,D=C+w;if(!(u===1&&_===-1)&&!(u===I-2&&_===1)&&!(C===1&&w===-1)&&!(C===I-2&&w===1)&&(p<=0||p>=I||D<=0||D>=I||c[p][D]===null))return!1}return!0}function M(a){for(let{x:f,y:u}of a)t(1,c[f][u]=null,c)}function J(){t(1,c=Array(I).fill().map(()=>Array(I).fill(null))),t(2,m=Array(I).fill().map(()=>Array(I).fill(null))),i=0,P=[],o="black"}function ce(){t(0,n="white"),o="white"}function te(){t(0,n="black"),o="black"}function q(){t(0,n="alternate"),o="black"}function ie(){let a=prompt("파일 이름을 입력하세요:","kibo.json");a||(a="kibo.json");const u=JSON.stringify({board:c,history:P,moveHistory:m,moveCount:i}),C=new Blob([u],{type:"application/json"}),_=URL.createObjectURL(C),w=document.createElement("a");w.href=_,w.download=a,w.click(),URL.revokeObjectURL(_)}function le(a){const f=a.target.files[0],u=new FileReader;u.onload=function(C){const _=JSON.parse(C.target.result);t(1,c=_.board),P=_.history,t(2,m=_.moveHistory),i=_.moveCount},u.readAsText(f)}async function W(){try{const a=await fetch("/kibo/files.json");t(4,H=await a.json())}catch(a){console.error("Error fetching kibo files:",a)}}Oe(async()=>{console.log("import.meta.env.DEV = ",!1),W(),console.log("onMount kiboFiles = ",H)});async function ne(a){const f=a.target.value;if(f)try{const C=await(await fetch(`/kibo/${f}`)).json();Y(C)}catch(u){console.error("Error loading kibo file:",u)}}function Y(a){t(1,c=a.board),P=a.history,t(2,m=a.moveHistory),i=a.moveCount}return[n,c,m,E,H,S,N,d,$,J,ce,te,q,ie,le,ne,(a,f,u)=>u.x===a+1&&u.y===f+1,(a,f)=>d(a+1,f+1),(a,f,u)=>{u.key==="Enter"&&d(a+1,f+1)}]}class He extends Se{constructor(e){super(),De(this,e,Xe,Re,Ae,{},null,[-1,-1])}}export{He as component};
