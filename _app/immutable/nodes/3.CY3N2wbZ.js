import{s as Ue,n as me,r as Be,o as Ve}from"../chunks/scheduler.BvLojk_z.js";import{S as je,i as Le,e as v,s as U,c as y,d as I,h as V,g as d,m as oe,n as _,p as se,q as ue,r as we,j as K,k as h,o as X,u as ae,v as ve,b as ye,f as ke,l as Me}from"../chunks/index.CdL9KQoL.js";function le(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function Ce(l,e,t){const n=l.slice();return n[31]=e[t],n}function Ee(l,e,t){const n=l.slice();return n[34]=e[t],n[36]=t,n}function Te(l,e,t){const n=l.slice();return n[37]=e[t],n[39]=t,n}function Fe(l,e,t){const n=l.slice();return n[40]=e[t],n[42]=t,n}function Pe(l,e,t){const n=l.slice();return n[40]=e[t],n[42]=t,n}function Ke(l){let e;return{c(){e=v("div"),this.h()},l(t){e=y(t,"DIV",{class:!0,style:!0}),I(e).forEach(d),this.h()},h(){_(e,"class","line horizontal svelte-u6ysmz"),ue(e,"top",l[42]*(1200/18)+"px")},m(t,n){K(t,e,n)},p:me,d(t){t&&d(e)}}}function Re(l){let e;return{c(){e=v("div"),this.h()},l(t){e=y(t,"DIV",{class:!0,style:!0}),I(e).forEach(d),this.h()},h(){_(e,"class","line vertical svelte-u6ysmz"),ue(e,"left",l[42]*(1200/18)+"px")},m(t,n){K(t,e,n)},p:me,d(t){t&&d(e)}}}function Xe(l){let e;return{c(){e=v("div"),this.h()},l(t){e=y(t,"DIV",{class:!0}),I(e).forEach(d),this.h()},h(){_(e,"class","star-point svelte-u6ysmz")},m(t,n){K(t,e,n)},d(t){t&&d(e)}}}function Ye(l){let e;return{c(){e=v("div"),this.h()},l(t){e=y(t,"DIV",{class:!0}),I(e).forEach(d),this.h()},h(){_(e,"class","stone white svelte-u6ysmz")},m(t,n){K(t,e,n)},d(t){t&&d(e)}}}function He(l){let e;return{c(){e=v("div"),this.h()},l(t){e=y(t,"DIV",{class:!0}),I(e).forEach(d),this.h()},h(){_(e,"class","stone black svelte-u6ysmz")},m(t,n){K(t,e,n)},d(t){t&&d(e)}}}function Ne(l){let e,t,n=l[3]&&Se(l);return{c(){e=v("div"),n&&n.c(),this.h()},l(o){e=y(o,"DIV",{class:!0});var s=I(e);n&&n.l(s),s.forEach(d),this.h()},h(){_(e,"class",t="stone "+l[1][l[36]+1][l[39]+1]+" svelte-u6ysmz")},m(o,s){K(o,e,s),n&&n.m(e,null)},p(o,s){o[3]?n?n.p(o,s):(n=Se(o),n.c(),n.m(e,null)):n&&(n.d(1),n=null),s[0]&2&&t!==(t="stone "+o[1][o[36]+1][o[39]+1]+" svelte-u6ysmz")&&_(e,"class",t)},d(o){o&&d(e),n&&n.d()}}}function Se(l){let e,t=l[2][l[36]+1][l[39]+1].length>0&&Ae(l);return{c(){t&&t.c(),e=ve()},l(n){t&&t.l(n),e=ve()},m(n,o){t&&t.m(n,o),K(n,e,o)},p(n,o){n[2][n[36]+1][n[39]+1].length>0?t?t.p(n,o):(t=Ae(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&d(e),t&&t.d(n)}}}function Ae(l){let e,t=l[2][l[36]+1][l[39]+1][l[2][l[36]+1][l[39]+1].length-1]+"",n;return{c(){e=v("span"),n=ye(t),this.h()},l(o){e=y(o,"SPAN",{class:!0});var s=I(e);n=ke(s,t),s.forEach(d),this.h()},h(){_(e,"class","move-number svelte-u6ysmz")},m(o,s){K(o,e,s),h(e,n)},p(o,s){s[0]&4&&t!==(t=o[2][o[36]+1][o[39]+1][o[2][o[36]+1][o[39]+1].length-1]+"")&&Me(n,t)},d(o){o&&d(e)}}}function Oe(l){let e,t=l[5].some(F),n,o,s,i,k;function F(...w){return l[17](l[36],l[39],...w)}let g=t&&Xe();function J(w,N){if(w[1][w[36]+1][w[39]+1]==="black")return He;if(w[1][w[36]+1][w[39]+1]==="white")return Ye}let T=J(l),C=T&&T(l),b=(l[1][l[36]+1][l[39]+1]==="black"||l[1][l[36]+1][l[39]+1]==="white")&&Ne(l);function Z(){return l[18](l[36],l[39])}function R(...w){return l[19](l[36],l[39],...w)}return{c(){e=v("div"),g&&g.c(),n=U(),C&&C.c(),o=U(),b&&b.c(),s=U(),this.h()},l(w){e=y(w,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var N=I(e);g&&g.l(N),n=V(N),C&&C.l(N),o=V(N),b&&b.l(N),s=V(N),N.forEach(d),this.h()},h(){_(e,"class","cell svelte-u6ysmz"),ue(e,"top",l[36]*(1200/18)-25+"px"),ue(e,"left",l[39]*(1200/18)-25+"px"),_(e,"role","button"),_(e,"tabindex","0")},m(w,N){K(w,e,N),g&&g.m(e,null),h(e,n),C&&C.m(e,null),h(e,o),b&&b.m(e,null),h(e,s),i||(k=[X(e,"click",Z),X(e,"keydown",R)],i=!0)},p(w,N){l=w,T!==(T=J(l))&&(C&&C.d(1),C=T&&T(l),C&&(C.c(),C.m(e,o))),l[1][l[36]+1][l[39]+1]==="black"||l[1][l[36]+1][l[39]+1]==="white"?b?b.p(l,N):(b=Ne(l),b.c(),b.m(e,s)):b&&(b.d(1),b=null)},d(w){w&&d(e),g&&g.d(),C&&C.d(),b&&b.d(),i=!1,Be(k)}}}function De(l){let e,t=le(l[34].slice(1,20)),n=[];for(let o=0;o<t.length;o+=1)n[o]=Oe(Te(l,t,o));return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=ve()},l(o){for(let s=0;s<n.length;s+=1)n[s].l(o);e=ve()},m(o,s){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(o,s);K(o,e,s)},p(o,s){if(s[0]&174){t=le(o[34].slice(1,20));let i;for(i=0;i<t.length;i+=1){const k=Te(o,t,i);n[i]?n[i].p(k,s):(n[i]=Oe(k),n[i].c(),n[i].m(e.parentNode,e))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}},d(o){o&&d(e),ae(n,o)}}}function Je(l){let e;return{c(){e=ye("순서보이기")},l(t){e=ke(t,"순서보이기")},m(t,n){K(t,e,n)},d(t){t&&d(e)}}}function qe(l){let e;return{c(){e=ye("순서숨기기")},l(t){e=ke(t,"순서숨기기")},m(t,n){K(t,e,n)},d(t){t&&d(e)}}}function Ie(l){let e,t=l[31]+"",n,o;return{c(){e=v("option"),n=ye(t),this.h()},l(s){e=y(s,"OPTION",{});var i=I(e);n=ke(i,t),i.forEach(d),this.h()},h(){e.__value=o=l[31],we(e,e.__value)},m(s,i){K(s,e,i),h(e,n)},p(s,i){i[0]&16&&t!==(t=s[31]+"")&&Me(n,t),i[0]&16&&o!==(o=s[31])&&(e.__value=o,we(e,e.__value))},d(s){s&&d(e)}}}function Ge(l){let e,t,n,o,s,i,k,F,g,J,T,C,b,Z,R,w="리셋",N,q,fe="<",ie,G,he=">",ce,P,W,de="기보 저장",re,Q,_e="기보 불러오기 (로컬)",be,ee,pe,r,u,f="기보 선택 (assets)",p,m,E=le(Array(19)),S=[];for(let c=0;c<E.length;c+=1)S[c]=Ke(Pe(l,E,c));let B=le(Array(19)),O=[];for(let c=0;c<B.length;c+=1)O[c]=Re(Fe(l,B,c));let Y=le(l[1].slice(1,20)),A=[];for(let c=0;c<Y.length;c+=1)A[c]=De(Ee(l,Y,c));function x(c,j){return c[3]?qe:Je}let H=x(l),$=H(l),ne=le(l[4]),M=[];for(let c=0;c<ne.length;c+=1)M[c]=Ie(Ce(l,ne,c));return{c(){e=v("div"),t=v("div");for(let c=0;c<S.length;c+=1)S[c].c();n=U();for(let c=0;c<O.length;c+=1)O[c].c();o=U();for(let c=0;c<A.length;c+=1)A[c].c();s=U(),i=v("div"),k=v("button"),F=U(),g=v("button"),J=U(),T=v("button"),C=U(),b=v("button"),$.c(),Z=U(),R=v("button"),R.textContent=w,N=U(),q=v("button"),q.textContent=fe,ie=U(),G=v("button"),G.textContent=he,ce=U(),P=v("div"),W=v("button"),W.textContent=de,re=U(),Q=v("label"),Q.textContent=_e,be=U(),ee=v("input"),pe=U(),r=v("select"),u=v("option"),u.textContent=f;for(let c=0;c<M.length;c+=1)M[c].c();this.h()},l(c){e=y(c,"DIV",{class:!0});var j=I(e);t=y(j,"DIV",{class:!0});var a=I(t);for(let L=0;L<S.length;L+=1)S[L].l(a);n=V(a);for(let L=0;L<O.length;L+=1)O[L].l(a);o=V(a);for(let L=0;L<A.length;L+=1)A[L].l(a);a.forEach(d),s=V(j),i=y(j,"DIV",{class:!0});var z=I(i);k=y(z,"BUTTON",{class:!0}),I(k).forEach(d),F=V(z),g=y(z,"BUTTON",{class:!0}),I(g).forEach(d),J=V(z),T=y(z,"BUTTON",{class:!0}),I(T).forEach(d),C=V(z),b=y(z,"BUTTON",{class:!0});var ze=I(b);$.l(ze),ze.forEach(d),Z=V(z),R=y(z,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),oe(R)!=="svelte-ib7ad3"&&(R.textContent=w),N=V(z),q=y(z,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(q)!=="svelte-mck75x"&&(q.textContent=fe),ie=V(z),G=y(z,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(G)!=="svelte-tiylbo"&&(G.textContent=he),ce=V(z),P=y(z,"DIV",{class:!0});var te=I(P);W=y(te,"BUTTON",{class:!0,"data-svelte-h":!0}),oe(W)!=="svelte-5dzi3v"&&(W.textContent=de),re=V(te),Q=y(te,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),oe(Q)!=="svelte-j9loce"&&(Q.textContent=_e),be=V(te),ee=y(te,"INPUT",{type:!0,id:!0,class:!0}),pe=V(te),r=y(te,"SELECT",{class:!0});var ge=I(r);u=y(ge,"OPTION",{"data-svelte-h":!0}),oe(u)!=="svelte-1tfg7ip"&&(u.textContent=f);for(let L=0;L<M.length;L+=1)M[L].l(ge);ge.forEach(d),te.forEach(d),z.forEach(d),j.forEach(d),this.h()},h(){_(t,"class","board svelte-u6ysmz"),_(k,"class","button white-button svelte-u6ysmz"),se(k,"selected",l[0]==="white"),_(g,"class","button black-button svelte-u6ysmz"),se(g,"selected",l[0]==="black"),_(T,"class","button alternate-button svelte-u6ysmz"),se(T,"selected",l[0]==="alternate"),_(b,"class","button number-button svelte-u6ysmz"),_(R,"class","button number-button svelte-u6ysmz"),ue(R,"background-color","red"),_(q,"class","icon-button svelte-u6ysmz"),_(G,"class","icon-button svelte-u6ysmz"),_(W,"class","kibo-button save svelte-u6ysmz"),_(Q,"for","kibo-file"),_(Q,"class","kibo-button load svelte-u6ysmz"),_(ee,"type","file"),_(ee,"id","kibo-file"),_(ee,"class","file-input svelte-u6ysmz"),u.__value="",we(u,u.__value),_(r,"class","kibo-button load svelte-u6ysmz"),_(P,"class","kibo-container svelte-u6ysmz"),_(i,"class","controls svelte-u6ysmz"),_(e,"class","board-container svelte-u6ysmz")},m(c,j){K(c,e,j),h(e,t);for(let a=0;a<S.length;a+=1)S[a]&&S[a].m(t,null);h(t,n);for(let a=0;a<O.length;a+=1)O[a]&&O[a].m(t,null);h(t,o);for(let a=0;a<A.length;a+=1)A[a]&&A[a].m(t,null);h(e,s),h(e,i),h(i,k),h(i,F),h(i,g),h(i,J),h(i,T),h(i,C),h(i,b),$.m(b,null),h(i,Z),h(i,R),h(i,N),h(i,q),h(i,ie),h(i,G),h(i,ce),h(i,P),h(P,W),h(P,re),h(P,Q),h(P,be),h(P,ee),h(P,pe),h(P,r),h(r,u);for(let a=0;a<M.length;a+=1)M[a]&&M[a].m(r,null);p||(m=[X(t,"contextmenu",l[8]),X(k,"click",l[11]),X(g,"click",l[12]),X(T,"click",l[13]),X(b,"click",l[6]),X(R,"click",l[10]),X(q,"click",l[8]),X(G,"click",l[9]),X(W,"click",l[14]),X(ee,"change",l[15]),X(r,"change",l[16])],p=!0)},p(c,j){if(j[0]&174){Y=le(c[1].slice(1,20));let a;for(a=0;a<Y.length;a+=1){const z=Ee(c,Y,a);A[a]?A[a].p(z,j):(A[a]=De(z),A[a].c(),A[a].m(t,null))}for(;a<A.length;a+=1)A[a].d(1);A.length=Y.length}if(j[0]&1&&se(k,"selected",c[0]==="white"),j[0]&1&&se(g,"selected",c[0]==="black"),j[0]&1&&se(T,"selected",c[0]==="alternate"),H!==(H=x(c))&&($.d(1),$=H(c),$&&($.c(),$.m(b,null))),j[0]&16){ne=le(c[4]);let a;for(a=0;a<ne.length;a+=1){const z=Ce(c,ne,a);M[a]?M[a].p(z,j):(M[a]=Ie(z),M[a].c(),M[a].m(r,null))}for(;a<M.length;a+=1)M[a].d(1);M.length=ne.length}},i:me,o:me,d(c){c&&d(e),ae(S,c),ae(O,c),ae(A,c),$.d(),ae(M,c),p=!1,Be(m)}}}const D=21;function We(l,e,t){let n="alternate",o="black",s=Array(D).fill().map(()=>Array(D).fill(null)),i=Array(D).fill().map(()=>Array(D).fill().map(()=>[])),k=0,F=[],g=[],J=!0,T=[];const C=[{x:4,y:4},{x:4,y:10},{x:4,y:16},{x:10,y:4},{x:10,y:10},{x:10,y:16},{x:16,y:4},{x:16,y:10},{x:16,y:16}];function b(){t(3,J=!J)}function Z(r,u){if(s[r][u]===null){t(1,s[r][u]=o,s),k++,i[r][u].push(k);const f=N(r,u);F.push({x:r,y:u,stone:o,capturedStones:f,moveCount:k}),g=[],n==="alternate"&&(o=o==="black"?"white":"black")}else t(1,s[r][u]=null,s)}function R(r){if(r.preventDefault(),F.length>0){const u=F.pop();g.push(u);const{x:f,y:p,capturedStones:m}=u;t(1,s[f][p]=null,s),i[f][p].pop();for(let{x:E,y:S,stone:B}of m)t(1,s[E][S]=B,s);o=u.stone,k--}}function w(){if(g.length>0){const r=g.pop(),{x:u,y:f,stone:p,moveCount:m}=r;t(1,s[u][f]=p,s),i[u][f].push(m),k++;const E=N(u,f);F.push({x:u,y:f,stone:o,capturedStones:E,moveCount:m}),o=p==="black"?"white":"black"}}function N(r,u){const f=o==="black"?"white":"black",p=[{dx:-1,dy:0},{dx:1,dy:0},{dx:0,dy:-1},{dx:0,dy:1}],m=[];for(let{dx:E,dy:S}of p){const B=r+E,O=u+S;if(B>0&&B<D&&O>0&&O<D&&s[B][O]===f){const Y=q(B,O,f);fe(Y)&&(m.push(...Y),ie(Y))}}return m}function q(r,u,f,p=new Set){const m=[],E=[{x:r,y:u}];p.add(`${r},${u}`);const S=[{dx:-1,dy:0},{dx:1,dy:0},{dx:0,dy:-1},{dx:0,dy:1}];for(;E.length>0;){const{x:B,y:O}=E.pop();m.push({x:B,y:O,stone:s[B][O]});for(let{dx:Y,dy:A}of S){const x=B+Y,H=O+A;x>0&&x<D&&H>0&&H<D&&s[x][H]===f&&!p.has(`${x},${H}`)&&(p.add(`${x},${H}`),E.push({x,y:H}))}}return m}function fe(r){const u=[{dx:-1,dy:0},{dx:1,dy:0},{dx:0,dy:-1},{dx:0,dy:1}];for(let{x:f,y:p}of r)for(let{dx:m,dy:E}of u){const S=f+m,B=p+E;if(!(f===1&&m===-1)&&!(f===D-2&&m===1)&&!(p===1&&E===-1)&&!(p===D-2&&E===1)&&(S<=0||S>=D||B<=0||B>=D||s[S][B]===null))return!1}return!0}function ie(r){for(let{x:u,y:f}of r)t(1,s[u][f]=null,s)}function G(){t(1,s=Array(D).fill().map(()=>Array(D).fill(null))),t(2,i=Array(D).fill().map(()=>Array(D).fill().map(()=>[]))),k=0,F=[],g=[],o="black"}function he(){t(0,n="white"),o="white"}function ce(){t(0,n="black"),o="black"}function P(){t(0,n="alternate"),o="black"}function W(){let r=prompt("파일 이름을 입력하세요:","kibo.json");r||(r="kibo.json");const f=JSON.stringify({board:s,history:F,moveHistoryStack:i,moveCount:k}),p=new Blob([f],{type:"application/json"}),m=URL.createObjectURL(p),E=document.createElement("a");E.href=m,E.download=r,E.click(),URL.revokeObjectURL(m)}function de(r){const u=r.target.files[0];if(!u)return;const f=new FileReader;f.onload=function(p){const m=JSON.parse(p.target.result);t(1,s=m.board||[]),F=m.history||[],t(2,i=m.moveHistoryStack||Array(D).fill().map(()=>Array(D).fill().map(()=>[]))),k=m.moveCount||0},f.readAsText(u)}async function re(){try{const r=await fetch("/kibo/files.json");t(4,T=await r.json())}catch(r){console.error("Error fetching kibo files:",r)}}Ve(async()=>{console.log("import.meta.env.DEV = ",!1),re(),console.log("onMount kiboFiles = ",T)});async function Q(r){const u=r.target.value;if(u)try{const p=await(await fetch(`/kibo/${u}`)).json();_e(p)}catch(f){console.error("Error loading kibo file:",f)}}function _e(r){t(1,s=r.board),F=r.history,moveHistory=r.moveHistory,k=r.moveCount}return[n,s,i,J,T,C,b,Z,R,w,G,he,ce,P,W,de,Q,(r,u,f)=>f.x===r+1&&f.y===u+1,(r,u)=>Z(r+1,u+1),(r,u,f)=>{f.key==="Enter"&&Z(r+1,u+1)}]}class xe extends je{constructor(e){super(),Le(this,e,We,Ge,Ue,{},null,[-1,-1])}}export{xe as component};
