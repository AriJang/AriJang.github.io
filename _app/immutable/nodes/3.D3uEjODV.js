import{x as g,s as re,n as W,b as X,o as Ge,r as Fe}from"../chunks/scheduler.aZHIKDCl.js";import{S as ie,i as ae,e as w,s as j,c as E,d as S,h as N,g as _,n as y,j as T,k as m,o as $,A as te,r as P,p as J,b as G,f as F,l as Le,m as ye,w as we,x as Ee,y as Se,t as Me,a as Te,z as Ae}from"../chunks/index.Ci_2FZzr.js";import{w as D}from"../chunks/index.Haq8omwQ.js";function Y(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}const M=21,Pe=Array(M).fill().map(()=>Array(M).fill(null)),Xe=Array(M).fill().map(()=>Array(M).fill().map(()=>[])),I=D(Pe),Je=D("alternate"),L=D("black"),q=D(Xe),R=D(0),V=D([]),K=D([]),Re=D(!1),We=D([]),ce=D(!1),H=D(!1),Q=D([]),Z=D([]),x=D(0);function Ze(){const t=g(V);I.update(e=>{for(let n=0;n<M;n++)for(let l=0;l<M;l++)e[n][l]=null;return t.forEach(({x:n,y:l,stone:o})=>{e[n][l]=o}),e})}function Be(t,e){if(g(ce)&&!g(H)){alert("놓아보기 모드를 활성화해야 착수할 수 있습니다.");return}xe(t,e,g(H))}function xe(t,e,n){const l=n?Q:V,o=n?x:R,s=n?Z:q;I.update(r=>{if(r[t][e]===null){r[t][e]=g(L),o.update(a=>a+1),s.update(a=>(a[t]||(a[t]=[]),a[t][e]||(a[t][e]=[]),a[t][e].push(g(o)),a));const u=Ye(t,e,r);l.update(a=>[...a,{x:t,y:e,stone:g(L),capturedStones:u,moveCount:g(o),isTryModeMove:n}]);const p=Ke(t,e,g(L),r);return Qe(p,r)?(alert("착수 금지!"),r[t][e]=null,o.update(a=>a-1),s.update(a=>(a[t][e].pop(),a)),g(l).pop(),r):(n||K.set([]),g(Je)==="alternate"&&L.set(g(L)==="black"?"white":"black"),r)}})}function Ye(t,e,n){const l=g(L)==="black"?"white":"black",o=[{dx:-1,dy:0},{dx:1,dy:0},{dx:0,dy:-1},{dx:0,dy:1}],s=[];for(let{dx:r,dy:u}of o){const p=t+r,a=e+u;if(p>0&&p<M&&a>0&&a<M&&n[p][a]===l){const b=Ke(p,a,l,n);Qe(b,n)&&(s.push(...b),et(b,n))}}return s}function Ke(t,e,n,l,o=new Set){const s=[],r=[{x:t,y:e}];o.add(`${t},${e}`);const u=[{dx:-1,dy:0},{dx:1,dy:0},{dx:0,dy:-1},{dx:0,dy:1}];for(;r.length>0;){const{x:p,y:a}=r.pop();s.push({x:p,y:a,stone:l[p][a]});for(let{dx:b,dy:h}of u){const c=p+b,f=a+h;c>0&&c<M&&f>0&&f<M&&l[c][f]===n&&!o.has(`${c},${f}`)&&(o.add(`${c},${f}`),r.push({x:c,y:f}))}}return s}function Qe(t,e){const n=[{dx:-1,dy:0},{dx:1,dy:0},{dx:0,dy:-1},{dx:0,dy:1}];for(let{x:l,y:o}of t)for(let{dx:s,dy:r}of n){const u=l+s,p=o+r;if(!(l===1&&s===-1)&&!(l===M-2&&s===1)&&!(o===1&&r===-1)&&!(o===M-2&&r===1)&&(u<=0||u>=M||p<=0||p>=M||e[u][p]===null))return!1}return!0}function et(t,e){t.forEach(({x:n,y:l})=>{e[n][l]=null})}function ue(){if(g(V).length>0){const t=g(V).pop();K.update(o=>[t,...o]);const{x:e,y:n,capturedStones:l}=t;I.update(o=>(o[e][n]=null,q.update(s=>(s[e][n].pop(),s)),l.forEach(({x:s,y:r,stone:u})=>{o[s][r]=u}),o)),L.set(t.stone),R.update(o=>o-1)}}function fe(){if(g(K).length>0){const t=g(K).shift(),{x:e,y:n,stone:l,moveCount:o}=t;I.update(s=>{s[e][n]=l,q.update(u=>(u[e][n].push(o),u));const r=Ye(e,n,s);return V.update(u=>[...u,{x:e,y:n,stone:l,capturedStones:r,moveCount:o}]),s}),L.set(l==="black"?"white":"black"),R.update(s=>s+1)}}function tt(){const t=g(V);K.update(e=>[...t,...e]),I.set(Array(M).fill().map(()=>Array(M).fill(null))),q.set(Array(M).fill().map(()=>Array(M).fill().map(()=>[]))),R.set(0),V.set([])}function nt(){let t=Math.min(5,g(V).length);for(let e=0;e<t;e++)ue()}function lt(){let t=Math.min(5,g(K).length);for(let e=0;e<t;e++)fe()}function ot(){for(;g(K).length>0;)fe()}function qe(){if(g(H)&&g(Q).length>0){const t=g(Q).pop();I.update(e=>(e[t.x][t.y]=null,e)),Z.update(e=>(e[t.x][t.y].pop(),e)),t.capturedStones.forEach(({x:e,y:n,stone:l})=>{I.update(o=>(o[e][n]=l,o))}),x.update(e=>e-1)}else alert("더 이상 되돌릴 수 없습니다.")}function st(){H.update(t=>!t),g(H)?rt():it()}function rt(){Q.set([]),Z.set(g(q)),H.set(!0),x.set(0)}function it(){H.set(!1),Q.set([]),Z.set([]),x.set(0),I.update(t=>{for(let e=0;e<M;e++)for(let n=0;n<M;n++)t[e][n]=null;return g(V).forEach(e=>{t[e.x][e.y]=e.stone}),t}),R.set(g(V).length)}function at(){I.set(Pe),q.set(Xe),R.set(0),V.set([]),K.set([]),ce.set(!1),H.set(!1),Q.set([]),x.set(0),L.set("black"),Ze()}async function ct(){try{const t=await fetch("/kibo/files.json");We.set(await t.json())}catch(t){console.error("Error fetching kibo files:",t)}}const ut=[{x:4,y:4},{x:4,y:10},{x:4,y:16},{x:10,y:4},{x:10,y:10},{x:10,y:16},{x:16,y:4},{x:16,y:10},{x:16,y:16}];function Ce(t,e,n){const l=t.slice();return l[13]=e[n],l[15]=n,l}function De(t,e,n){const l=t.slice();return l[16]=e[n],l[18]=n,l}function je(t,e,n){const l=t.slice();return l[19]=e[n],l[21]=n,l}function Ne(t,e,n){const l=t.slice();return l[19]=e[n],l[21]=n,l}function $e(t){let e;return{c(){e=w("div"),this.h()},l(n){e=E(n,"DIV",{class:!0,style:!0}),S(e).forEach(_),this.h()},h(){y(e,"class","line horizontal svelte-auuj2f"),P(e,"top",t[21]*t[0]+"px")},m(n,l){T(n,e,l)},p(n,l){l&1&&P(e,"top",n[21]*n[0]+"px")},d(n){n&&_(e)}}}function Ve(t){let e;return{c(){e=w("div"),this.h()},l(n){e=E(n,"DIV",{class:!0,style:!0}),S(e).forEach(_),this.h()},h(){y(e,"class","line vertical svelte-auuj2f"),P(e,"left",t[21]*t[0]+"px")},m(n,l){T(n,e,l)},p(n,l){l&1&&P(e,"left",n[21]*n[0]+"px")},d(n){n&&_(e)}}}function ft(t){let e;return{c(){e=w("div"),this.h()},l(n){e=E(n,"DIV",{class:!0}),S(e).forEach(_),this.h()},h(){y(e,"class","star-point svelte-auuj2f")},m(n,l){T(n,e,l)},d(n){n&&_(e)}}}function dt(t){let e;return{c(){e=w("div"),this.h()},l(n){e=E(n,"DIV",{class:!0}),S(e).forEach(_),this.h()},h(){y(e,"class","stone white svelte-auuj2f")},m(n,l){T(n,e,l)},d(n){n&&_(e)}}}function ht(t){let e;return{c(){e=w("div"),this.h()},l(n){e=E(n,"DIV",{class:!0}),S(e).forEach(_),this.h()},h(){y(e,"class","stone black svelte-auuj2f")},m(n,l){T(n,e,l)},d(n){n&&_(e)}}}function Ie(t){let e,n;function l(r,u){if(r[1])return _t;if(r[5])return pt}let o=l(t),s=o&&o(t);return{c(){e=w("div"),s&&s.c(),this.h()},l(r){e=E(r,"DIV",{class:!0});var u=S(e);s&&s.l(u),u.forEach(_),this.h()},h(){y(e,"class",n="stone "+t[2][t[15]+1][t[18]+1]+" svelte-auuj2f")},m(r,u){T(r,e,u),s&&s.m(e,null)},p(r,u){o===(o=l(r))&&s?s.p(r,u):(s&&s.d(1),s=o&&o(r),s&&(s.c(),s.m(e,null))),u&4&&n!==(n="stone "+r[2][r[15]+1][r[18]+1]+" svelte-auuj2f")&&y(e,"class",n)},d(r){r&&_(e),s&&s.d()}}}function pt(t){let e,n=t[6][t[15]+1][t[18]+1].length>0&&He(t);return{c(){n&&n.c(),e=J()},l(l){n&&n.l(l),e=J()},m(l,o){n&&n.m(l,o),T(l,e,o)},p(l,o){l[6][l[15]+1][l[18]+1].length>0?n?n.p(l,o):(n=He(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(l){l&&_(e),n&&n.d(l)}}}function _t(t){let e=t[3].find(l),n;function l(...s){return t[8](t[15],t[18],...s)}let o=e&&ze(t);return{c(){o&&o.c(),n=J()},l(s){o&&o.l(s),n=J()},m(s,r){o&&o.m(s,r),T(s,n,r)},p(s,r){t=s,r&8&&(e=t[3].find(l)),e?o?o.p(t,r):(o=ze(t),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},d(s){s&&_(n),o&&o.d(s)}}}function He(t){let e,n=t[6][t[15]+1][t[18]+1][t[6][t[15]+1][t[18]+1].length-1]+"",l;return{c(){e=w("span"),l=G(n),this.h()},l(o){e=E(o,"SPAN",{class:!0});var s=S(e);l=F(s,n),s.forEach(_),this.h()},h(){y(e,"class","move-number svelte-auuj2f")},m(o,s){T(o,e,s),m(e,l)},p(o,s){s&64&&n!==(n=o[6][o[15]+1][o[18]+1][o[6][o[15]+1][o[18]+1].length-1]+"")&&Le(l,n)},d(o){o&&_(e)}}}function ze(t){let e,n=t[4][t[15]+1][t[18]+1][t[4][t[15]+1][t[18]+1].length-1]+"",l;return{c(){e=w("span"),l=G(n),this.h()},l(o){e=E(o,"SPAN",{class:!0});var s=S(e);l=F(s,n),s.forEach(_),this.h()},h(){y(e,"class","move-number svelte-auuj2f")},m(o,s){T(o,e,s),m(e,l)},p(o,s){s&16&&n!==(n=o[4][o[15]+1][o[18]+1][o[4][o[15]+1][o[18]+1].length-1]+"")&&Le(l,n)},d(o){o&&_(e)}}}function Ue(t){let e,n=ut.some(p),l,o,s,r,u;function p(...d){return t[9](t[15],t[18],...d)}let a=n&&ft();function b(d,v){if(d[2][d[15]+1][d[18]+1]==="black")return ht;if(d[2][d[15]+1][d[18]+1]==="white")return dt}let h=b(t),c=h&&h(t),f=(t[2][t[15]+1][t[18]+1]==="black"||t[2][t[15]+1][t[18]+1]==="white")&&Ie(t);function i(){return t[10](t[15],t[18])}function C(...d){return t[11](t[15],t[18],...d)}return{c(){e=w("div"),a&&a.c(),l=j(),c&&c.c(),o=j(),f&&f.c(),s=j(),this.h()},l(d){e=E(d,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var v=S(e);a&&a.l(v),l=N(v),c&&c.l(v),o=N(v),f&&f.l(v),s=N(v),v.forEach(_),this.h()},h(){y(e,"class","cell svelte-auuj2f"),P(e,"top",t[15]*t[0]-t[0]/2+"px"),P(e,"left",t[18]*t[0]-t[0]/2+"px"),y(e,"role","button"),y(e,"tabindex","0")},m(d,v){T(d,e,v),a&&a.m(e,null),m(e,l),c&&c.m(e,null),m(e,o),f&&f.m(e,null),m(e,s),r||(u=[$(e,"click",i),$(e,"keydown",C)],r=!0)},p(d,v){t=d,h!==(h=b(t))&&(c&&c.d(1),c=h&&h(t),c&&(c.c(),c.m(e,o))),t[2][t[15]+1][t[18]+1]==="black"||t[2][t[15]+1][t[18]+1]==="white"?f?f.p(t,v):(f=Ie(t),f.c(),f.m(e,s)):f&&(f.d(1),f=null),v&1&&P(e,"top",t[15]*t[0]-t[0]/2+"px"),v&1&&P(e,"left",t[18]*t[0]-t[0]/2+"px")},d(d){d&&_(e),a&&a.d(),c&&c.d(),f&&f.d(),r=!1,Fe(u)}}}function Oe(t){let e,n=Y(t[13].slice(1,20)),l=[];for(let o=0;o<n.length;o+=1)l[o]=Ue(De(t,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=J()},l(o){for(let s=0;s<l.length;s+=1)l[s].l(o);e=J()},m(o,s){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(o,s);T(o,e,s)},p(o,s){if(s&127){n=Y(o[13].slice(1,20));let r;for(r=0;r<n.length;r+=1){const u=De(o,n,r);l[r]?l[r].p(u,s):(l[r]=Ue(u),l[r].c(),l[r].m(e.parentNode,e))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(o){o&&_(e),te(l,o)}}}function vt(t){let e,n,l,o,s,r=Y(Array(19)),u=[];for(let c=0;c<r.length;c+=1)u[c]=$e(Ne(t,r,c));let p=Y(Array(19)),a=[];for(let c=0;c<p.length;c+=1)a[c]=Ve(je(t,p,c));let b=Y(t[2].slice(1,20)),h=[];for(let c=0;c<b.length;c+=1)h[c]=Oe(Ce(t,b,c));return{c(){e=w("div");for(let c=0;c<u.length;c+=1)u[c].c();n=j();for(let c=0;c<a.length;c+=1)a[c].c();l=j();for(let c=0;c<h.length;c+=1)h[c].c();this.h()},l(c){e=E(c,"DIV",{class:!0});var f=S(e);for(let i=0;i<u.length;i+=1)u[i].l(f);n=N(f);for(let i=0;i<a.length;i+=1)a[i].l(f);l=N(f);for(let i=0;i<h.length;i+=1)h[i].l(f);f.forEach(_),this.h()},h(){y(e,"class","board svelte-auuj2f")},m(c,f){T(c,e,f);for(let i=0;i<u.length;i+=1)u[i]&&u[i].m(e,null);m(e,n);for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(e,null);m(e,l);for(let i=0;i<h.length;i+=1)h[i]&&h[i].m(e,null);o||(s=$(e,"contextmenu",t[7]),o=!0)},p(c,[f]){if(f&1){r=Y(Array(19));let i;for(i=0;i<r.length;i+=1){const C=Ne(c,r,i);u[i]?u[i].p(C,f):(u[i]=$e(C),u[i].c(),u[i].m(e,n))}for(;i<u.length;i+=1)u[i].d(1);u.length=r.length}if(f&1){p=Y(Array(19));let i;for(i=0;i<p.length;i+=1){const C=je(c,p,i);a[i]?a[i].p(C,f):(a[i]=Ve(C),a[i].c(),a[i].m(e,l))}for(;i<a.length;i+=1)a[i].d(1);a.length=p.length}if(f&127){b=Y(c[2].slice(1,20));let i;for(i=0;i<b.length;i+=1){const C=Ce(c,b,i);h[i]?h[i].p(C,f):(h[i]=Oe(C),h[i].c(),h[i].m(e,null))}for(;i<h.length;i+=1)h[i].d(1);h.length=b.length}},i:W,o:W,d(c){c&&_(e),te(u,c),te(a,c),te(h,c),o=!1,s()}}}function mt(t,e,n){let l,o,s,r,u,p;X(t,H,d=>n(1,l=d)),X(t,I,d=>n(2,o=d)),X(t,Q,d=>n(3,s=d)),X(t,Z,d=>n(4,r=d)),X(t,Re,d=>n(5,u=d)),X(t,q,d=>n(6,p=d));let a=1200,b=a/18;Ge(()=>{const d=window.matchMedia("(max-width: 830px), (max-height: 900px)"),v=window.matchMedia("(max-width: 1250px), (max-height: 1300px)");function A(){d.matches?(console.log("GoBoard small boardSize = 600"),a=600):v.matches?(console.log("GoBoard medium boardSize = 800"),a=800):(console.log("GoBoard large boardSize = 1200"),a=1200),n(0,b=a/18),console.log("cellSize = ",b)}A(),d.addEventListener("change",A),v.addEventListener("change",A)});function h(d){d.preventDefault(),l?qe():ue()}return[b,l,o,s,r,u,p,h,(d,v,A)=>A.x===d+1&&A.y===v+1&&A.isTryModeMove,(d,v,A)=>A.x===d+1&&A.y===v+1,(d,v)=>{Be(d+1,v+1)},(d,v,A)=>{A.key==="Enter"&&Be(d+1,v+1)}]}class bt extends ie{constructor(e){super(),ae(this,e,mt,vt,re,{})}}function gt(t){let e;return{c(){e=G("놓아보기 시작")},l(n){e=F(n,"놓아보기 시작")},m(n,l){T(n,e,l)},d(n){n&&_(e)}}}function kt(t){let e;return{c(){e=G("놓아보기 종료")},l(n){e=F(n,"놓아보기 종료")},m(n,l){T(n,e,l)},d(n){n&&_(e)}}}function yt(t){let e,n,l,o,s,r,u,p,a,b,h,c="한 수 뒤로",f,i,C,d,v,A,ne,z,le,oe,U,de="리셋",se,he;function pe(B,k){return B[0]?kt:gt}let ee=pe(t),O=ee(t);return{c(){e=w("div"),n=w("button"),O.c(),o=j(),s=w("button"),r=G("처음으로"),u=j(),p=w("button"),a=G("5수 뒤로"),b=j(),h=w("button"),h.textContent=c,f=j(),i=w("button"),C=G("한 수 앞으로"),d=j(),v=w("button"),A=G("5수 앞으로"),ne=j(),z=w("button"),le=G("마지막으로"),oe=j(),U=w("button"),U.textContent=de,this.h()},l(B){e=E(B,"DIV",{class:!0});var k=S(e);n=E(k,"BUTTON",{class:!0});var _e=S(n);O.l(_e),_e.forEach(_),o=N(k),s=E(k,"BUTTON",{class:!0});var ve=S(s);r=F(ve,"처음으로"),ve.forEach(_),u=N(k),p=E(k,"BUTTON",{class:!0});var me=S(p);a=F(me,"5수 뒤로"),me.forEach(_),b=N(k),h=E(k,"BUTTON",{class:!0,"data-svelte-h":!0}),ye(h)!=="svelte-sopxef"&&(h.textContent=c),f=N(k),i=E(k,"BUTTON",{class:!0});var be=S(i);C=F(be,"한 수 앞으로"),be.forEach(_),d=N(k),v=E(k,"BUTTON",{class:!0});var ge=S(v);A=F(ge,"5수 앞으로"),ge.forEach(_),ne=N(k),z=E(k,"BUTTON",{class:!0});var ke=S(z);le=F(ke,"마지막으로"),ke.forEach(_),oe=N(k),U=E(k,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),ye(U)!=="svelte-1vscfyt"&&(U.textContent=de),k.forEach(_),this.h()},h(){y(n,"class","button svelte-18ghowh"),n.disabled=l=!t[1],y(s,"class","button svelte-18ghowh"),s.disabled=t[0],y(p,"class","button svelte-18ghowh"),p.disabled=t[0],y(h,"class","button svelte-18ghowh"),y(i,"class","button svelte-18ghowh"),i.disabled=t[0],y(v,"class","button svelte-18ghowh"),v.disabled=t[0],y(z,"class","button svelte-18ghowh"),z.disabled=t[0],y(U,"class","button svelte-18ghowh"),P(U,"background-color","red"),y(e,"class","media-buttons svelte-18ghowh")},m(B,k){T(B,e,k),m(e,n),O.m(n,null),m(e,o),m(e,s),m(s,r),m(e,u),m(e,p),m(p,a),m(e,b),m(e,h),m(e,f),m(e,i),m(i,C),m(e,d),m(e,v),m(v,A),m(e,ne),m(e,z),m(z,le),m(e,oe),m(e,U),se||(he=[$(n,"click",st),$(s,"click",tt),$(p,"click",nt),$(h,"click",t[2]),$(i,"click",fe),$(v,"click",lt),$(z,"click",ot),$(U,"click",at)],se=!0)},p(B,[k]){ee!==(ee=pe(B))&&(O.d(1),O=ee(B),O&&(O.c(),O.m(n,null))),k&2&&l!==(l=!B[1])&&(n.disabled=l),k&1&&(s.disabled=B[0]),k&1&&(p.disabled=B[0]),k&1&&(i.disabled=B[0]),k&1&&(v.disabled=B[0]),k&1&&(z.disabled=B[0])},i:W,o:W,d(B){B&&_(e),O.d(),se=!1,Fe(he)}}}function wt(t,e,n){let l,o;X(t,H,r=>n(0,l=r)),X(t,ce,r=>n(1,o=r));function s(r){r.preventDefault(),l?qe():ue()}return[l,o,s]}class Et extends ie{constructor(e){super(),ae(this,e,wt,yt,re,{})}}function St(t){let e,n,l,o,s,r,u,p;return o=new bt({}),u=new Et({}),{c(){e=w("div"),n=w("div"),l=w("div"),we(o.$$.fragment),s=j(),r=w("div"),we(u.$$.fragment),this.h()},l(a){e=E(a,"DIV",{class:!0});var b=S(e);n=E(b,"DIV",{class:!0});var h=S(n);l=E(h,"DIV",{class:!0});var c=S(l);Ee(o.$$.fragment,c),c.forEach(_),s=N(h),r=E(h,"DIV",{class:!0});var f=S(r);Ee(u.$$.fragment,f),f.forEach(_),h.forEach(_),b.forEach(_),this.h()},h(){y(l,"class","board-container svelte-1kvap55"),y(r,"class","media-buttons-container svelte-1kvap55"),y(n,"class","board-side-container svelte-1kvap55"),y(e,"class","container svelte-1kvap55")},m(a,b){T(a,e,b),m(e,n),m(n,l),Se(o,l,null),m(n,s),m(n,r),Se(u,r,null),p=!0},p:W,i(a){p||(Me(o.$$.fragment,a),Me(u.$$.fragment,a),p=!0)},o(a){Te(o.$$.fragment,a),Te(u.$$.fragment,a),p=!1},d(a){a&&_(e),Ae(o),Ae(u)}}}function Mt(t){return Ge(async()=>{console.log("import.meta.env.DEV = ",!1),ct()}),[]}class Ct extends ie{constructor(e){super(),ae(this,e,Mt,St,re,{})}}export{Ct as component};
