import{x as b,s as re,n as Z,b as P,o as Ge,r as Xe}from"../chunks/scheduler.aZHIKDCl.js";import{S as ie,i as ae,e as S,s as z,c as E,d as T,h as I,g as p,n as y,j as B,k as _,o as $,A as ne,r as L,p as R,b as X,f as Y,l as Ye,m as ke,w as we,x as Se,y as Ee,t as Me,a as Te,z as Ae}from"../chunks/index.Ci_2FZzr.js";import{w as V}from"../chunks/index.Haq8omwQ.js";function K(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}const A=21,Fe=Array(A).fill().map(()=>Array(A).fill(null)),Le=Array(A).fill().map(()=>Array(A).fill().map(()=>[])),U=V(Fe),Je=V("alternate"),F=V("black"),J=V(Le),W=V(0),H=V([]),Q=V([]),Re=V(!1),We=V([]),ce=V(!1),j=V(!1),q=V([]),x=V([]),ee=V(0);function Ze(){const t=b(H);U.update(e=>{for(let n=0;n<A;n++)for(let l=0;l<A;l++)e[n][l]=null;return t.forEach(({x:n,y:l,stone:o})=>{e[n][l]=o}),e})}function Be(t,e){if(b(ce)&&!b(j)){alert("놓아보기 모드를 활성화해야 착수할 수 있습니다.");return}xe(t,e,b(j))}function xe(t,e,n){const l=n?q:H,o=n?ee:W,s=n?x:J;U.update(r=>{if(r[t][e]===null){r[t][e]=b(F),o.update(a=>a+1),s.update(a=>(a[t]||(a[t]=[]),a[t][e]||(a[t][e]=[]),a[t][e].push(b(o)),a));const u=Pe(t,e,r);l.update(a=>[...a,{x:t,y:e,stone:b(F),capturedStones:u,moveCount:b(o),isTryModeMove:n}]);const h=Ke(t,e,b(F),r);return Qe(h,r)?(alert("착수 금지!"),r[t][e]=null,o.update(a=>a-1),s.update(a=>(a[t][e].pop(),a)),b(l).pop(),r):(n||Q.set([]),b(Je)==="alternate"&&F.set(b(F)==="black"?"white":"black"),r)}})}function Pe(t,e,n){const l=b(F)==="black"?"white":"black",o=[{dx:-1,dy:0},{dx:1,dy:0},{dx:0,dy:-1},{dx:0,dy:1}],s=[];for(let{dx:r,dy:u}of o){const h=t+r,a=e+u;if(h>0&&h<A&&a>0&&a<A&&n[h][a]===l){const v=Ke(h,a,l,n);Qe(v,n)&&(s.push(...v),et(v,n))}}return s}function Ke(t,e,n,l,o=new Set){const s=[],r=[{x:t,y:e}];o.add(`${t},${e}`);const u=[{dx:-1,dy:0},{dx:1,dy:0},{dx:0,dy:-1},{dx:0,dy:1}];for(;r.length>0;){const{x:h,y:a}=r.pop();s.push({x:h,y:a,stone:l[h][a]});for(let{dx:v,dy:d}of u){const c=h+v,f=a+d;c>0&&c<A&&f>0&&f<A&&l[c][f]===n&&!o.has(`${c},${f}`)&&(o.add(`${c},${f}`),r.push({x:c,y:f}))}}return s}function Qe(t,e){const n=[{dx:-1,dy:0},{dx:1,dy:0},{dx:0,dy:-1},{dx:0,dy:1}];for(let{x:l,y:o}of t)for(let{dx:s,dy:r}of n){const u=l+s,h=o+r;if(!(l===1&&s===-1)&&!(l===A-2&&s===1)&&!(o===1&&r===-1)&&!(o===A-2&&r===1)&&(u<=0||u>=A||h<=0||h>=A||e[u][h]===null))return!1}return!0}function et(t,e){t.forEach(({x:n,y:l})=>{e[n][l]=null})}function ue(){if(b(H).length>0){const t=b(H).pop();Q.update(o=>[t,...o]);const{x:e,y:n,capturedStones:l}=t;U.update(o=>(o[e][n]=null,J.update(s=>(s[e][n].pop(),s)),l.forEach(({x:s,y:r,stone:u})=>{o[s][r]=u}),o)),F.set(t.stone),W.update(o=>o-1)}}function fe(){if(b(Q).length>0){const t=b(Q).shift(),{x:e,y:n,stone:l,moveCount:o}=t;U.update(s=>{s[e][n]=l,J.update(u=>(u[e][n].push(o),u));const r=Pe(e,n,s);return H.update(u=>[...u,{x:e,y:n,stone:l,capturedStones:r,moveCount:o}]),s}),F.set(l==="black"?"white":"black"),W.update(s=>s+1)}}function tt(){const t=b(H);Q.update(e=>[...t,...e]),U.set(Array(A).fill().map(()=>Array(A).fill(null))),J.set(Array(A).fill().map(()=>Array(A).fill().map(()=>[]))),W.set(0),H.set([])}function nt(){let t=Math.min(5,b(H).length);for(let e=0;e<t;e++)ue()}function lt(){let t=Math.min(5,b(Q).length);for(let e=0;e<t;e++)fe()}function ot(){for(;b(Q).length>0;)fe()}function qe(){if(b(j)&&b(q).length>0){const t=b(q).pop();U.update(e=>(e[t.x][t.y]=null,e)),x.update(e=>(e[t.x][t.y].pop(),e)),t.capturedStones.forEach(({x:e,y:n,stone:l})=>{U.update(o=>(o[e][n]=l,o))}),ee.update(e=>e-1)}else alert("더 이상 되돌릴 수 없습니다.")}function st(){j.update(t=>!t),b(j)?rt():it()}function rt(){q.set([]),x.set(b(J)),j.set(!0),ee.set(0)}function it(){j.set(!1),q.set([]),x.set([]),ee.set(0),U.update(t=>{for(let e=0;e<A;e++)for(let n=0;n<A;n++)t[e][n]=null;return b(H).forEach(e=>{t[e.x][e.y]=e.stone}),t}),W.set(b(H).length)}function at(){U.set(Fe),J.set(Le),W.set(0),H.set([]),Q.set([]),ce.set(!1),j.set(!1),q.set([]),ee.set(0),F.set("black"),Ze()}async function ct(){try{const t=await fetch("/kibo/files.json");We.set(await t.json())}catch(t){console.error("Error fetching kibo files:",t)}}const ut=[{x:4,y:4},{x:4,y:10},{x:4,y:16},{x:10,y:4},{x:10,y:10},{x:10,y:16},{x:16,y:4},{x:16,y:10},{x:16,y:16}];function Ce(t,e,n){const l=t.slice();return l[15]=e[n],l[17]=n,l}function De(t,e,n){const l=t.slice();return l[18]=e[n],l[20]=n,l}function Ne(t,e,n){const l=t.slice();return l[21]=e[n],l[23]=n,l}function Ve(t,e,n){const l=t.slice();return l[21]=e[n],l[23]=n,l}function ze(t){let e;return{c(){e=S("div"),this.h()},l(n){e=E(n,"DIV",{class:!0,style:!0}),T(e).forEach(p),this.h()},h(){y(e,"class","line horizontal svelte-h12u5t"),L(e,"top",t[23]*t[1]+"px")},m(n,l){B(n,e,l)},p(n,l){l&2&&L(e,"top",n[23]*n[1]+"px")},d(n){n&&p(e)}}}function Ie(t){let e;return{c(){e=S("div"),this.h()},l(n){e=E(n,"DIV",{class:!0,style:!0}),T(e).forEach(p),this.h()},h(){y(e,"class","line vertical svelte-h12u5t"),L(e,"left",t[23]*t[0]+"px")},m(n,l){B(n,e,l)},p(n,l){l&1&&L(e,"left",n[23]*n[0]+"px")},d(n){n&&p(e)}}}function ft(t){let e;return{c(){e=S("div"),this.h()},l(n){e=E(n,"DIV",{class:!0}),T(e).forEach(p),this.h()},h(){y(e,"class","star-point svelte-h12u5t")},m(n,l){B(n,e,l)},d(n){n&&p(e)}}}function dt(t){let e;return{c(){e=S("div"),this.h()},l(n){e=E(n,"DIV",{class:!0}),T(e).forEach(p),this.h()},h(){y(e,"class","stone white svelte-h12u5t")},m(n,l){B(n,e,l)},d(n){n&&p(e)}}}function ht(t){let e;return{c(){e=S("div"),this.h()},l(n){e=E(n,"DIV",{class:!0}),T(e).forEach(p),this.h()},h(){y(e,"class","stone black svelte-h12u5t")},m(n,l){B(n,e,l)},d(n){n&&p(e)}}}function $e(t){let e,n;function l(r,u){if(r[2])return _t;if(r[6])return pt}let o=l(t),s=o&&o(t);return{c(){e=S("div"),s&&s.c(),this.h()},l(r){e=E(r,"DIV",{class:!0});var u=T(e);s&&s.l(u),u.forEach(p),this.h()},h(){y(e,"class",n="stone "+t[3][t[17]+1][t[20]+1]+" svelte-h12u5t")},m(r,u){B(r,e,u),s&&s.m(e,null)},p(r,u){o===(o=l(r))&&s?s.p(r,u):(s&&s.d(1),s=o&&o(r),s&&(s.c(),s.m(e,null))),u&8&&n!==(n="stone "+r[3][r[17]+1][r[20]+1]+" svelte-h12u5t")&&y(e,"class",n)},d(r){r&&p(e),s&&s.d()}}}function pt(t){let e,n=t[7][t[17]+1][t[20]+1].length>0&&He(t);return{c(){n&&n.c(),e=R()},l(l){n&&n.l(l),e=R()},m(l,o){n&&n.m(l,o),B(l,e,o)},p(l,o){l[7][l[17]+1][l[20]+1].length>0?n?n.p(l,o):(n=He(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(l){l&&p(e),n&&n.d(l)}}}function _t(t){let e=t[4].find(l),n;function l(...s){return t[9](t[17],t[20],...s)}let o=e&&Ue(t);return{c(){o&&o.c(),n=R()},l(s){o&&o.l(s),n=R()},m(s,r){o&&o.m(s,r),B(s,n,r)},p(s,r){t=s,r&16&&(e=t[4].find(l)),e?o?o.p(t,r):(o=Ue(t),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},d(s){s&&p(n),o&&o.d(s)}}}function He(t){let e,n=t[7][t[17]+1][t[20]+1][t[7][t[17]+1][t[20]+1].length-1]+"",l;return{c(){e=S("span"),l=X(n),this.h()},l(o){e=E(o,"SPAN",{class:!0});var s=T(e);l=Y(s,n),s.forEach(p),this.h()},h(){y(e,"class","move-number svelte-h12u5t")},m(o,s){B(o,e,s),_(e,l)},p(o,s){s&128&&n!==(n=o[7][o[17]+1][o[20]+1][o[7][o[17]+1][o[20]+1].length-1]+"")&&Ye(l,n)},d(o){o&&p(e)}}}function Ue(t){let e,n=t[5][t[17]+1][t[20]+1][t[5][t[17]+1][t[20]+1].length-1]+"",l;return{c(){e=S("span"),l=X(n),this.h()},l(o){e=E(o,"SPAN",{class:!0});var s=T(e);l=Y(s,n),s.forEach(p),this.h()},h(){y(e,"class","move-number svelte-h12u5t")},m(o,s){B(o,e,s),_(e,l)},p(o,s){s&32&&n!==(n=o[5][o[17]+1][o[20]+1][o[5][o[17]+1][o[20]+1].length-1]+"")&&Ye(l,n)},d(o){o&&p(e)}}}function je(t){let e,n=ut.some(h),l,o,s,r,u;function h(...w){return t[10](t[17],t[20],...w)}let a=n&&ft();function v(w,k){if(w[3][w[17]+1][w[20]+1]==="black")return ht;if(w[3][w[17]+1][w[20]+1]==="white")return dt}let d=v(t),c=d&&d(t),f=(t[3][t[17]+1][t[20]+1]==="black"||t[3][t[17]+1][t[20]+1]==="white")&&$e(t);function i(){return t[11](t[17],t[20])}function D(...w){return t[12](t[17],t[20],...w)}return{c(){e=S("div"),a&&a.c(),l=z(),c&&c.c(),o=z(),f&&f.c(),s=z(),this.h()},l(w){e=E(w,"DIV",{class:!0,style:!0,role:!0,tabindex:!0});var k=T(e);a&&a.l(k),l=I(k),c&&c.l(k),o=I(k),f&&f.l(k),s=I(k),k.forEach(p),this.h()},h(){y(e,"class","cell svelte-h12u5t"),L(e,"top",t[17]*t[1]-t[1]/2+"px"),L(e,"left",t[20]*t[0]-t[0]/2+"px"),y(e,"role","button"),y(e,"tabindex","0")},m(w,k){B(w,e,k),a&&a.m(e,null),_(e,l),c&&c.m(e,null),_(e,o),f&&f.m(e,null),_(e,s),r||(u=[$(e,"click",i),$(e,"keydown",D)],r=!0)},p(w,k){t=w,d!==(d=v(t))&&(c&&c.d(1),c=d&&d(t),c&&(c.c(),c.m(e,o))),t[3][t[17]+1][t[20]+1]==="black"||t[3][t[17]+1][t[20]+1]==="white"?f?f.p(t,k):(f=$e(t),f.c(),f.m(e,s)):f&&(f.d(1),f=null),k&2&&L(e,"top",t[17]*t[1]-t[1]/2+"px"),k&1&&L(e,"left",t[20]*t[0]-t[0]/2+"px")},d(w){w&&p(e),a&&a.d(),c&&c.d(),f&&f.d(),r=!1,Xe(u)}}}function Oe(t){let e,n=K(t[15].slice(1,20)),l=[];for(let o=0;o<n.length;o+=1)l[o]=je(De(t,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=R()},l(o){for(let s=0;s<l.length;s+=1)l[s].l(o);e=R()},m(o,s){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(o,s);B(o,e,s)},p(o,s){if(s&255){n=K(o[15].slice(1,20));let r;for(r=0;r<n.length;r+=1){const u=De(o,n,r);l[r]?l[r].p(u,s):(l[r]=je(u),l[r].c(),l[r].m(e.parentNode,e))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(o){o&&p(e),ne(l,o)}}}function vt(t){let e,n,l,o,s,r=K(Array(19)),u=[];for(let c=0;c<r.length;c+=1)u[c]=ze(Ve(t,r,c));let h=K(Array(19)),a=[];for(let c=0;c<h.length;c+=1)a[c]=Ie(Ne(t,h,c));let v=K(t[3].slice(1,20)),d=[];for(let c=0;c<v.length;c+=1)d[c]=Oe(Ce(t,v,c));return{c(){e=S("div");for(let c=0;c<u.length;c+=1)u[c].c();n=z();for(let c=0;c<a.length;c+=1)a[c].c();l=z();for(let c=0;c<d.length;c+=1)d[c].c();this.h()},l(c){e=E(c,"DIV",{class:!0});var f=T(e);for(let i=0;i<u.length;i+=1)u[i].l(f);n=I(f);for(let i=0;i<a.length;i+=1)a[i].l(f);l=I(f);for(let i=0;i<d.length;i+=1)d[i].l(f);f.forEach(p),this.h()},h(){y(e,"class","board svelte-h12u5t")},m(c,f){B(c,e,f);for(let i=0;i<u.length;i+=1)u[i]&&u[i].m(e,null);_(e,n);for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(e,null);_(e,l);for(let i=0;i<d.length;i+=1)d[i]&&d[i].m(e,null);o||(s=$(e,"contextmenu",t[8]),o=!0)},p(c,[f]){if(f&2){r=K(Array(19));let i;for(i=0;i<r.length;i+=1){const D=Ve(c,r,i);u[i]?u[i].p(D,f):(u[i]=ze(D),u[i].c(),u[i].m(e,n))}for(;i<u.length;i+=1)u[i].d(1);u.length=r.length}if(f&1){h=K(Array(19));let i;for(i=0;i<h.length;i+=1){const D=Ne(c,h,i);a[i]?a[i].p(D,f):(a[i]=Ie(D),a[i].c(),a[i].m(e,l))}for(;i<a.length;i+=1)a[i].d(1);a.length=h.length}if(f&255){v=K(c[3].slice(1,20));let i;for(i=0;i<v.length;i+=1){const D=Ce(c,v,i);d[i]?d[i].p(D,f):(d[i]=Oe(D),d[i].c(),d[i].m(e,null))}for(;i<d.length;i+=1)d[i].d(1);d.length=v.length}},i:Z,o:Z,d(c){c&&p(e),ne(u,c),ne(a,c),ne(d,c),o=!1,s()}}}function mt(t,e,n){let l,o,s,r,u,h;P(t,j,m=>n(2,l=m)),P(t,U,m=>n(3,o=m)),P(t,q,m=>n(4,s=m)),P(t,x,m=>n(5,r=m)),P(t,Re,m=>n(6,u=m)),P(t,J,m=>n(7,h=m));let a=1200,v=1400,d=a/18,c=v/18;Ge(()=>{const m=window.matchMedia("(max-width: 830px), (max-height: 900px)"),N=window.matchMedia("(max-width: 1250px), (max-height: 1300px)");function M(){m.matches?(console.log("GoBoard small boardSize = 600"),a=600,v=680):N.matches?(console.log("GoBoard medium boardSize = 800"),a=800,v=900):(console.log("GoBoard large boardSize = 1200"),a=1200,v=1400),n(0,d=a/18),n(1,c=v/18),console.log("cellXSize = ",d),console.log("cellYSize = ",c)}M(),m.addEventListener("change",M),N.addEventListener("change",M)});function f(m){m.preventDefault(),l?qe():ue()}return[d,c,l,o,s,r,u,h,f,(m,N,M)=>M.x===m+1&&M.y===N+1&&M.isTryModeMove,(m,N,M)=>M.x===m+1&&M.y===N+1,(m,N)=>{Be(m+1,N+1)},(m,N,M)=>{M.key==="Enter"&&Be(m+1,N+1)}]}class bt extends ie{constructor(e){super(),ae(this,e,mt,vt,re,{})}}function gt(t){let e;return{c(){e=X("놓아보기 시작")},l(n){e=Y(n,"놓아보기 시작")},m(n,l){B(n,e,l)},d(n){n&&p(e)}}}function yt(t){let e;return{c(){e=X("놓아보기 종료")},l(n){e=Y(n,"놓아보기 종료")},m(n,l){B(n,e,l)},d(n){n&&p(e)}}}function kt(t){let e,n,l,o,s,r,u,h,a,v,d,c="한 수 뒤로",f,i,D,w,k,m,N,M,le,oe,O,de="리셋",se,he;function pe(C,g){return C[0]?yt:gt}let te=pe(t),G=te(t);return{c(){e=S("div"),n=S("button"),G.c(),o=z(),s=S("button"),r=X("처음으로"),u=z(),h=S("button"),a=X("5수 뒤로"),v=z(),d=S("button"),d.textContent=c,f=z(),i=S("button"),D=X("한 수 앞으로"),w=z(),k=S("button"),m=X("5수 앞으로"),N=z(),M=S("button"),le=X("마지막으로"),oe=z(),O=S("button"),O.textContent=de,this.h()},l(C){e=E(C,"DIV",{class:!0});var g=T(e);n=E(g,"BUTTON",{class:!0});var _e=T(n);G.l(_e),_e.forEach(p),o=I(g),s=E(g,"BUTTON",{class:!0});var ve=T(s);r=Y(ve,"처음으로"),ve.forEach(p),u=I(g),h=E(g,"BUTTON",{class:!0});var me=T(h);a=Y(me,"5수 뒤로"),me.forEach(p),v=I(g),d=E(g,"BUTTON",{class:!0,"data-svelte-h":!0}),ke(d)!=="svelte-sopxef"&&(d.textContent=c),f=I(g),i=E(g,"BUTTON",{class:!0});var be=T(i);D=Y(be,"한 수 앞으로"),be.forEach(p),w=I(g),k=E(g,"BUTTON",{class:!0});var ge=T(k);m=Y(ge,"5수 앞으로"),ge.forEach(p),N=I(g),M=E(g,"BUTTON",{class:!0});var ye=T(M);le=Y(ye,"마지막으로"),ye.forEach(p),oe=I(g),O=E(g,"BUTTON",{class:!0,style:!0,"data-svelte-h":!0}),ke(O)!=="svelte-1vscfyt"&&(O.textContent=de),g.forEach(p),this.h()},h(){y(n,"class","button svelte-18ghowh"),n.disabled=l=!t[1],y(s,"class","button svelte-18ghowh"),s.disabled=t[0],y(h,"class","button svelte-18ghowh"),h.disabled=t[0],y(d,"class","button svelte-18ghowh"),y(i,"class","button svelte-18ghowh"),i.disabled=t[0],y(k,"class","button svelte-18ghowh"),k.disabled=t[0],y(M,"class","button svelte-18ghowh"),M.disabled=t[0],y(O,"class","button svelte-18ghowh"),L(O,"background-color","red"),y(e,"class","media-buttons svelte-18ghowh")},m(C,g){B(C,e,g),_(e,n),G.m(n,null),_(e,o),_(e,s),_(s,r),_(e,u),_(e,h),_(h,a),_(e,v),_(e,d),_(e,f),_(e,i),_(i,D),_(e,w),_(e,k),_(k,m),_(e,N),_(e,M),_(M,le),_(e,oe),_(e,O),se||(he=[$(n,"click",st),$(s,"click",tt),$(h,"click",nt),$(d,"click",t[2]),$(i,"click",fe),$(k,"click",lt),$(M,"click",ot),$(O,"click",at)],se=!0)},p(C,[g]){te!==(te=pe(C))&&(G.d(1),G=te(C),G&&(G.c(),G.m(n,null))),g&2&&l!==(l=!C[1])&&(n.disabled=l),g&1&&(s.disabled=C[0]),g&1&&(h.disabled=C[0]),g&1&&(i.disabled=C[0]),g&1&&(k.disabled=C[0]),g&1&&(M.disabled=C[0])},i:Z,o:Z,d(C){C&&p(e),G.d(),se=!1,Xe(he)}}}function wt(t,e,n){let l,o;P(t,j,r=>n(0,l=r)),P(t,ce,r=>n(1,o=r));function s(r){r.preventDefault(),l?qe():ue()}return[l,o,s]}class St extends ie{constructor(e){super(),ae(this,e,wt,kt,re,{})}}function Et(t){let e,n,l,o,s,r,u,h;return o=new bt({}),u=new St({}),{c(){e=S("div"),n=S("div"),l=S("div"),we(o.$$.fragment),s=z(),r=S("div"),we(u.$$.fragment),this.h()},l(a){e=E(a,"DIV",{class:!0});var v=T(e);n=E(v,"DIV",{class:!0});var d=T(n);l=E(d,"DIV",{class:!0});var c=T(l);Se(o.$$.fragment,c),c.forEach(p),s=I(d),r=E(d,"DIV",{class:!0});var f=T(r);Se(u.$$.fragment,f),f.forEach(p),d.forEach(p),v.forEach(p),this.h()},h(){y(l,"class","board-container svelte-1j1poy8"),y(r,"class","media-buttons-container svelte-1j1poy8"),y(n,"class","board-side-container svelte-1j1poy8"),y(e,"class","container svelte-1j1poy8")},m(a,v){B(a,e,v),_(e,n),_(n,l),Ee(o,l,null),_(n,s),_(n,r),Ee(u,r,null),h=!0},p:Z,i(a){h||(Me(o.$$.fragment,a),Me(u.$$.fragment,a),h=!0)},o(a){Te(o.$$.fragment,a),Te(u.$$.fragment,a),h=!1},d(a){a&&p(e),Ae(o),Ae(u)}}}function Mt(t){return Ge(async()=>{console.log("import.meta.env.DEV = ",!1),ct()}),[]}class Ct extends ie{constructor(e){super(),ae(this,e,Mt,Et,re,{})}}export{Ct as component};
